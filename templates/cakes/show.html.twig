{% extends 'base.html.twig' %}

{% block title %}Cakes{% endblock %}

{% block main %}
    <h1>{{ cake.title }}</h1>

    <table class="table">
        <tbody>
        <tr>
            <th>Title</th>
            <td>{{ cake.title }}</td>
        </tr>
        <tr>
            <th>Description</th>
            <td>{{ cake.description }}</td>
        </tr>
        <tr>
            <th>Price</th>
            <td>{{ cake.price }}</td>
        </tr>
        <tr>
            <th>Quantity</th>
            <td>{{ cake.quantity }}</td>
        </tr>
        <tr>
            <th>Image</th>
            <td>
                {% if cake.image %}
                    <img src="{{ cake.image }}" alt="" style="max-width: 200px;">
                {% endif %}
            </td>
        </tr>
        </tbody>
    </table>

    <div class="mt-3">
        {% if cake.quantity > 0 %}
            <form action="{{ path('app_cakes_add_to_cart', {'id': cake.id}) }}" method="POST">
                <label for="quantity">Quantité :</label>
                <input type="number" id="quantity" name="quantity" value="1" min="1" max="{{ cake.quantity }}">
                <button type="submit" class="btn btn-success">Ajouter au panier</button>
            </form>
        {% else %}
            <span class="text-danger">Rupture de stock</span>
        {% endif %}
    </div>

    <div class="mt-3">
        <a href="{{ path('app_cakes_index') }}" class="btn btn-secondary">Retour à la liste</a>

        <!-- Liens admin uniquement -->
        {% if app.user and app.user.isAdmin %}
            <a href="{{ path('app_cakes_edit', {'id': cake.id}) }}" class="btn btn-primary">Modifier</a>
            {{ include('cakes/_delete_form.html.twig') }}
        {% endif %}
    </div>
{% endblock main %}
